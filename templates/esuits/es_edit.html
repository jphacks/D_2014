{% extends 'esuits/base.html' %}

{% load static %}

{% block title %}
ES編集ページ
{% endblock %}

{% block head %}
<!-- <link rel="stylesheet" href="{% static 'css/index.css' %}"> -->
{% endblock %}

{% block content %}
<style>
.scroll-y {
	box-sizing: border-box;
	overflow-y: scroll;
	width: 300px;
	height: 100px;
	padding: 10px;
	border: 1px solid #aab4b9;
	background: #fafafa;
	font-size: 16px;
	transform: translateZ(0);
}

.scroll-x {
	box-sizing: border-box;
	overflow-x: scroll;
	width: 300px;
	height: 100px;
	padding: 10px;
	border: 1px solid #aab4b9;
	background: #fafafa;
	font-size: 16px;
	transform: translateZ(0);
}
</style>
<main>

  <h1>ES編集ページ</h1>
  <p>ここでESの回答を作成します</p>

  <p>{{ message }}</p>

  <h2>企業名: {{ es_info.company }}</h2>
  <p>選考種別: {{ es_info.event_type }}</p>

  <h2>質問と回答の一覧</h2>
  <form action="" method="POST">
    {% csrf_token %}
    {{ formset_management_form }}

    {% for post, form, related_posts in zipped_posts_info %}
    <div class="post-list">
      <h3>{{ post.question }}</h3>
      <p>{{ form }}</p>

      <h4>関連するポスト</h4>
      <p>----------</p>
      <div class="related-post">
        <div class="scroll-x">
          {% for post in related_posts %}
          <p>{{ post.question }}</p>
          <p>{{ post.answer }}</p>
          <p>----------</p>
          {% endfor %}
        </div>
        
      </div>
      <button type="button" class="related-post-button">表示切り替え</button>
    </div>
    {% endfor %}
    <input type="submit" value="保存する">
  </form>

  <div>
    <div>
      <h2>企業の情報</h2>
      <p>ワードクラウドなどをのせる</p>
    </div>

    <div>
      <h2>ニュース一覧</h2>
        <div class="scroll-y">
			{% for news in news_list %}
				<p>{{ news.title }}</p>
				<a href="{{ news.url }}">{{ news.url }}</a>
			{% endfor %}
      </div>
      
    </div>
  </div>
</main>
<script>
  $(function(){
    $('.related-post-button').on('click',function(){
      $(this).parents('.post-list').find('.related-post').toggle();
    });
  });
</script>

{% endblock %}
