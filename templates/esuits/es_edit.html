{% extends 'esuits/base.html' %}

{% load static %}

{% block title %}
{% endblock %}

{% block head %}
<!-- <link rel="stylesheet" href="{% static 'css/index.css' %}"> -->
{% endblock %}

{% block content %}

<style>
.scroll-y {
	box-sizing: border-box;
	overflow-y: scroll;
	width: 300px;
	height: 100px;
	padding: 10px;
	border: 1px solid #eceaec;
	background: #f7f7f7;
	font-size: 16px;
	transform: translateZ(0);
}

.scroll-x {
	box-sizing: border-box;
	overflow-x: scroll;
	width: 300px;
	height: 100px;
	padding: 10px;
	border: 1px solid #aab4b9;
	background: #fafafa;
	font-size: 16px;
	transform: translateZ(0);
}
</style>



<main>
  <h1>ES編集ページ</h1>
  <h2>企業名: {{ es_info.company }}</h2>
  <p>選考種別: {{ es_info.event_type }}</p>

  <div class="container">
    <div class="row">
      <div class="col-lg-5">
        {% for post, form, related_posts in zipped_posts_info %}
          <div class="card" style="width:30rem;">
            <div class="card-header">
              {{ post.question }}
              
            </div>
            <div class="card-body">
              {% for item in tags.all %}
                {{ item }}
              {% endfor %}
              {{ form }}
            </div>
          </div>
        
          <div class="card" style="width:30rem;">
            <div class="card-body">
              <ul class="nav">
                <li class="nav-item dropdown">
                  <a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="true">他の企業の回答を見る</a>
                  <div class="dropdown-menu">
                    {% for related_post in related_posts %}
                      <a class="dropdown-item" id="{{ related_post.es_group_id }}-{{ related_post.question }}-tab" href="#{{ related_post.es_group_id }}-{{ related_post.question }}">{{ related_post.question }}</a>
                    {% endfor %}
                  </div>
                </li>
              </ul>
              <div class="tab-content" id="queryInRelatedPost">
                {% for related_post in related_posts %}
                  <div class="tab-pane fade show" id="{{ related_post.es_group_id }}-{{ related_post.question }}" role="tabpanel" aria-labelledby="{{ related_post.es_group_id }}-{{ related_post.question }}-tab">
                    <div class="scroll"><p>{{ related_post.answer }}</p></div>
                  </div>
                {% endfor %}
              </div>

            </div>
          </div>
        {% endfor %}
      </div>
      <div class="col-lg-7">
        <div class="card" style="width:30rem;">
          <div class="card-body">
          <img src="/static/esuits/images/dammycloud.png" class="img">
        </div>
        <h2>{{ es_info.company }}</h2>
        <div class="scroll">
          {% for news in news_list %}
            <p>{{ news.title }}</p>
            <a href="{{ news.url }}">{{ news.url }}</a>
          {% endfor %}
        </div>
        </div>
      </div>
    </div>
  </div>

  <!--<p>{{ message }}</p>-->


<!--
  <h2>質問と回答の一覧</h2>
  <form action="" method="POST">
    {% csrf_token %}
    {{ formset_management_form }}

    {% for post, form, related_posts in zipped_posts_info %}
    <div class="post-list">
      <h3>{{ post.question }}</h3>
      <p>{{ form }}</p>

      <h4>関連するポスト</h4>
      <p>----------</p>
      <div class="related-post">
        <div class="scroll-x">
          {% for post in related_posts %}
          <p>{{ post.question }}</p>
          <p>{{ post.answer }}</p>
          <p>----------</p>
          {% endfor %}
        </div>
        
      </div>
      <button type="button" class="related-post-button">隠す</button>
    </div>
    {% endfor %}
    <input type="submit" value="保存する">
  </form>

  <div>
    <div>
      <h2>企業の情報</h2>
      <p>ワードクラウドなどをのせる</p>
    </div>

    <div>
      <h2>ニュース一覧</h2>
        <div class="scroll-y">
			{% for news in news_list %}
				<p>{{ news.title }}</p>
				<a href="{{ news.url }}">{{ news.url }}</a>
			{% endfor %}
      </div>
      
    </div>
  </div>


</main>
<script>
  $(function(){
    $('.related-post-button').on('click',function(){
      $(this).parents('.post-list').find('.related-post').toggle();
      if($(this).parents('.post-list').find('.related-post').css('display') == 'block'){
        $(this).text('隠す');
      } else {
        $(this).text('表示する');
      }
    });
  });
</script>
-->
<script>
  autoPadding();
</script>
{% endblock %}
